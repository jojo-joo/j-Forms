(m=>{var d=/\[([0-9]*)\](?=\[|\.|$)/g,a={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},h={evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g};let s=e=>Array.isArray(e)?[...e]:Object.assign({},e),r=e=>{try{return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}catch(e){console.error("error:",e.message)}};function c(e){return!(null==e)}function u(e,t){return"object"==typeof e&&e.hasOwnProperty(t)}function p(e){return c(e)&&(e=""+e)?e.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):""}function f(e){return e.replace(/([ \!\"\#\$\%\&\'\(\)\*\+\,\.\/\:\;<\=\>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")}function o(e){return e.replace(/\ /g,"_")}function l(e){function a(e,t){t.find("> .active").removeClass("active"),e.addClass("active")}function l(e,t){e.find("input, textarea, select").removeAttr("disabled"),e.parent().children(":not([data-idx="+t+"])").find("input, textarea, select").attr("disabled","disabled")}function t(e){var t=m("option:selected",m(this)),n=m(this),i=t.get(0).getAttribute("data-idx")||t.attr("value");e.preventDefault(),t.hasClass("active")||(e=m(this).parents(".tabbable").eq(0).find("> .tab-content > [data-idx="+i+"]"),a(t,n),a(e,e.parent()),l(e,i))}function n(e){m("a",m(this));var t=m(this).parents(".tabbable").first().find(".tab-content").first(),n=m(this).index(),t=t.find("> [data-idx="+n+"]");e.preventDefault(),a(m(this),m(this).parent()),a(t,t.parent()),m(this).parent().hasClass("jsonform-alternative")&&l(t,n)}e.each(function(){m(this).delegate("select.nav","change",t),m(this).find("select.nav").each(function(){m(this).val(m(this).find(".active").attr("value"));var e=m(this).find("option:selected").get(0).getAttribute("data-idx")||m(this).find("option:selected").attr("value"),t=m(this).parents(".tabbable").eq(0).find("> .tab-content > [data-idx="+e+"]");l(t,e)}),m(this).delegate("ul.nav li","click",n),m(this).find("ul.nav li.active").click()})}function e(t){return{template:e=>`<input type="${t}" name="${e.node.name}" value="${r(e.value)}" id="${e.id}" ${e.node.disabled?" disabled":""} ${e.node.readOnly?" readonly='readonly'":""} ${e.node.schemaElement&&(0<e.node.schemaElement.step||"any"==e.node.schemaElement.step)?" step='"+e.node.schemaElement.step+"'":""} ${e.node.schemaElement&&e.node.schemaElement.minLength?" minlength='"+e.node.schemaElement.minLength+"'":""} ${e.node.schemaElement&&e.node.schemaElement.maxLength?" maxlength='"+e.node.schemaElement.maxLength+"'":""} ${e.node.schemaElement&&e.node.schemaElement.required&&"boolean"!==e.node.schemaElement.type?" required='required'":""} ${e.node.placeholder?" placeholder='"+r(e.node.placeholder)+"'":""} />`,childTemplate:function(e){return'<div class="pure-control-group">'+e+"</div>"}}}function v(e,t){if(t=t.replace(/\./g,".properties.").replace(/\[[0-9]*\]/g,".items"),(e=x.util.getObjKey(e,t,!0))&&e.$ref)throw new Error("JSONForm does not yet support schemas that use the $ref keyword. See: https://github.com/joshfire/jsonform/issues/54");return e}function y(e,n){var i=0;return e?n&&0!==n.length?e.replace(d,function(e,t){return c(n[i])&&(e="["+n[i]+"]"),i+=1,e}):e:null}function g(t,e,n,i,a){function l(e,t){var n=null;return e&&e.length?(e.forEach(e=>{n||(e===t?n={key:e}:"string"!=typeof e&&(e.key===t?n=e:e.items&&(n=l(e.items,t))))}),n):null}var r=null,s=((i=i||{}).idx=i.idx||(n?n[n.length-1]:1),i.value=c(i.value)?i.value:"",i.getValue=i.getValue||function(e){return g(t,e,n,i,a)},l(t.form||[],e)),o=v(t.schema.properties,e);return a&&t.value&&(r=x.util.getObjKey(t.value,y(e,n))),c(r)||(s&&void 0!==s.value?r=s.value:o&&c(o.default)&&(r=o.default),r=(r=r&&-1!==r.indexOf("{{values.")?r.replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}'):r)&&tmpl(r,h)(i)),(r=c(r)&&s&&u(s.titleMap,r)?tmpl(s.titleMap[r],h)(i):r)&&"string"==typeof r&&o&&o.maxLength&&r.length>o.maxLength&&(r=r.substr(0,o.maxLength-1)+"â€¦"),c(r)?r:null}function b(){this.id=null,this.key=null,this.el=null,this.formElement=null,this.schemaElement=null,this.view=null,this.children=[],this.ownerTree=null,this.parentNode=null,this.childTemplate=null,this.legendChild=null,this.arrayPath=[],this.childPos=0}function E(){this.eventhandlers=[],this.root=null,this.formDesc=null}!function(){function o(e){return"\\"+t[e]}var a={},d=(this.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},/(.)^/),t={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},m=/\\|'|\r|\n|\u2028|\u2029/g;this.tmpl=function(l,e){e=Object.assign({},this.templateSettings,e);var t,n=RegExp([(e.escape||d).source,(e.interpolate||d).source,(e.evaluate||d).source].join("|")+"|$","g"),r=0,s="__p+='";l.replace(n,function(e,t,n,i,a){return s+=l.slice(r,a).replace(m,o),r=a+e.length,t?s+="'+\n((__t=("+t+"))==null?'':escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),e}),s+="';\n",s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(s=e.variable?s:"with(obj||{}){\n"+s+"}\n")+"return __p;\n";try{t=new Function(e.variable||"obj","_",s)}catch(e){throw e.source=s,e}function i(e){return t.call(this,e,a)}n=e.variable||"obj";return i.source="function("+n+"){\n"+s+"}",i}}();var x={util:{},fieldTemplate:(e,t,n)=>{let i=t&&t.htmlMetaData?t.htmlMetaData:{};var a=Object.keys(i).map(e=>`${e}="${i[e]}"`).join(" "),l=`pure-control-group ${n.schemaElement&&n.schemaElement.required&&"boolean"!==n.schemaElement.type?"jsonform-required":""} ${n.readOnly?"jsonform-readonly":""} `+(n.disabled?"jsonform-disabled":""),r=n.title||n.name,s=n.description?`<span class="help-block">${n.description}</span>`:"";return`<div ${a} class="${l}">
      ${t&&t.notitle?"":`<label for="${n.id}">${r}</label>`}
      ${e}
      ${s}
      <span class="help-block jsonform-errortext" style="display:none;"></span>
    </div>`}};x.elementTypes={none:{template:""},root:{template:e=>`<div class="pure-form pure-form-aligned">${e.children}</div>`},text:e("text"),password:e("password"),date:e("date"),datetime:e("datetime"),"datetime-local":e("datetime-local"),email:e("email"),month:e("month"),number:e("number"),search:e("search"),tel:e("tel"),time:e("time"),url:e("url"),week:e("week"),range:{template:e=>{var t=e.fieldHtmlClass?`class="${e.fieldHtmlClass}" `:"",n=e.node.disabled?" disabled":"",i=e.node.schemaElement&&e.node.schemaElement.required?' required="required"':"",a=e.node.title?r(e.node.title):e.node.name,l=e.range.indicator?`<span class="range-value" rel="${e.id}">${r(e.value)}</span>`:"";return`<div class="range"><input type="range" ${t}
          name="${e.node.name}" value="${r(e.value)}" id="${e.id}"
          aria-label="${a}" ${n} min="${e.range.min}"
          max="${e.range.max}" step="${e.range.step}" ${i} />
          ${l}
        </div>`},onInput:function(e,t){t=document.querySelector('span.range-value[rel="'+t.id+'"]');t&&(t.innerText=e.target.value)},onBeforeRender:function(e,t){e.range={min:1,max:100,step:1,indicator:!1},t&&t.schemaElement&&(t.formElement&&t.formElement.step&&(e.range.step=t.formElement.step),t.formElement&&t.formElement.indicator&&(e.range.indicator=t.formElement.indicator),void 0!==t.schemaElement.minimum&&(t.schemaElement.exclusiveMinimum?e.range.min=t.schemaElement.minimum+e.range.step:e.range.min=t.schemaElement.minimum),void 0!==t.schemaElement.maximum)&&(t.schemaElement.exclusiveMaximum?e.range.max=t.schemaElement.maximum-e.range.step:e.range.max=t.schemaElement.maximum)}},color:{template:'<input type="text" <%= (fieldHtmlClass ? "class=\'" + fieldHtmlClass + "\' " : "") %>name="<%= node.name %>" value="<%= escape(value) %>" id="<%= id %>" aria-label="<%= node.title ? escape(node.title) : node.name %>"<%= (node.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %> />',onInsert:function(e,t){m(t.el).find("#"+f(t.id)).spectrum({preferredFormat:"hex",showInput:!0})}},textarea:{template:'<textarea id="<%= id %>" name="<%= node.name %>" <%= (fieldHtmlClass ? "class=\'" + fieldHtmlClass + "\' " : "") %>style="height:<%= elt.height || "150px" %>;width:<%= elt.width || "100%" %>;" aria-label="<%= node.title ? escape(node.title) : node.name %>"<%= (node.disabled? " disabled" : "")%><%= (node.readOnly ? " readonly=\'readonly\'" : "") %><%= (node.schemaElement && node.schemaElement.minLength ? " minlength=\'" + node.schemaElement.minLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.maxLength ? " maxlength=\'" + node.schemaElement.maxLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %><%= (node.placeholder? " placeholder=" + \'"\' + escape(node.placeholder) + \'"\' : "")%>><%= value %></textarea>'},checkbox:{template:'<div class="checkbox"><label><input type="checkbox" id="<%= id %>" <%= (fieldHtmlClass ? " class=\'" + fieldHtmlClass + "\'": "") %>name="<%= node.name %>" value="1" <% if (value) {%>checked<% } %><%= (node.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required && (node.schemaElement.type !== "boolean") ? " required=\'required\'" : "") %> /><%= node.inlinetitle || "" %></label></div>',getElement:function(e){return m(e).parent().get(0)}},file:{template:'<input class="input-file" id="<%= id %>" name="<%= node.name %>" type="file" <%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %><%= (node.formElement && node.formElement.accept ? (" accept=\'" + node.formElement.accept + "\'") : "") %>/>'},select:{template:'<select name="<%= node.name %>" id="<%= id %>"class=\'form-control<%= (fieldHtmlClass ? " " + fieldHtmlClass : "") %>\'<%= (node.schemaElement && node.schemaElement.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %>> <% node.options.forEach((key, val)=>{ if(key instanceof Object) { if (value === key.value) { %> <option selected value="<%= key.value %>"><%= key.title %></option> <% } else { %> <option value="<%= key.value %>"><%= key.title %></option> <% }} else { if (value === key) { %> <option selected value="<%= key %>"><%= key %></option> <% } else { %><option value="<%= key %>"><%= key %></option> <% }}}); %> </select>'},radiobuttons:{template:'<div id="<%= node.id %>"><% node.options.forEach((key, val)=>{ %><label class="btn btn-default <% if (((key instanceof Object) && (value === key.value)) || (value === key)) { %>active btn-success<% } %>"><input<%= (fieldHtmlClass ? " class=\'" + fieldHtmlClass + "\'": "") %> type="radio" style="position:absolute;left:-9999px;" <% if (((key instanceof Object) && (value === key.value)) || (value === key)) { %> checked="checked" <% } %> name="<%= node.name %>" value="<%= (key instanceof Object ? key.value : key) %>" /><span><%= (key instanceof Object ? key.title : key) %></span></label> <% }); %></div>',onInsert:function(e,t){var n="active",i=t.formElement||{};i.activeClass&&(n+=" "+i.activeClass),m(t.el).find("label").on("click",function(){m(this).parent().find("label").removeClass(n),m(this).addClass(n)})}},checkboxes:{template:"<div><%= choiceshtml %></div>",onBeforeRender:function(e,n){var t=null,i=null;n&&n.schemaElement&&(t=n.schemaElement.items?n.schemaElement.items.enum||n.schemaElement.items[0].enum:n.schemaElement.enum)&&(i="",t.forEach((e,t)=>{i+=tmpl('<div class="checkbox"><label><input type="checkbox" <% if (value) { %> checked="checked" <% } %> name="<%= name %>" value="1"<%= (node.disabled? " disabled" : "")%>/><%= title %></label></div>',a)({name:n.key+"["+t+"]",value:n.value.includes(e),title:u(n.formElement.titleMap,e)?n.formElement.titleMap[e]:e,node:n})}),e.choiceshtml=i)}},array:{template:'<div id="<%= id %>"><ul class="_jsonform-array-ul" style="list-style-type:none;"><%= children %></ul><span class="_jsonform-array-buttons"><a href="#" class="btn btn-default _jsonform-array-addmore"><i class="glyphicon glyphicon-plus-sign" title="Add new"></i></a> <a href="#" class="btn btn-default _jsonform-array-deletelast"><i class="glyphicon glyphicon-minus-sign" title="Delete last"></i></a></span></div>',array:!0,childTemplate:function(e,t){return m("").sortable?'<li data-idx="<%= node.childPos %>">'+(t?'<span class="draggable line"><i class="glyphicon glyphicon-list" title="Move item"></i></span>':"")+e+"</li>":'<li data-idx="<%= node.childPos %>">'+e+"</li>"},onInsert:function(e,o){var d=m(o.el).find("#"+f(o.id)),n=o.getArrayBoundaries(),t=(m("> span > a._jsonform-array-addmore",d).click(function(e){e.preventDefault(),e.stopPropagation();e=o.children.length;if(0<=n.maxItems&&(o.children.length>n.maxItems-2&&d.find("> span > a._jsonform-array-addmore").addClass("disabled"),o.children.length>n.maxItems-1))return!1;o.insertArrayItem(e,m("> ul",d).get(0)),(n.minItems<=0||0<n.minItems&&o.children.length>n.minItems-1)&&d.find("> span > a._jsonform-array-deletelast").removeClass("disabled")}),m("> ul > li",d).length);if(0<n.minItems&&t<n.minItems)for(var i=0;i<n.minItems-1&&d.find("> ul > li").length<n.minItems;i++)o.insertArrayItem(t,d.find("> ul").get(0));0<n.minItems&&o.children.length<=n.minItems&&d.find("> span > a._jsonform-array-deletelast").addClass("disabled"),m("> span > a._jsonform-array-deletelast",d).click(function(e){var t=o.children.length-1;if(e.preventDefault(),e.stopPropagation(),0<n.minItems){if(o.children.length<n.minItems+2&&d.find("> span > a._jsonform-array-deletelast").addClass("disabled"),o.children.length<=n.minItems)return!1}else 1===o.children.length&&d.find("> span > a._jsonform-array-deletelast").addClass("disabled");o.deleteArrayItem(t),0<=n.maxItems&&t<=n.maxItems-1&&d.find("> span > a._jsonform-array-addmore").removeClass("disabled")}),c(o.formElement.draggable)&&!o.formElement.draggable||m(o.el).sortable&&(m("> ul",d).sortable(),m("> ul",d).bind("sortstop",function(e,t){var n=m(t.item).data("idx"),t=m(t.item).index(),i=t;if(n!==i){for(var a=n<i?1:-1,l=0,r=m("> ul",d),l=n;l!==i;l+=a)o.children[l].switchValuesWith(o.children[l+a]),o.children[l].render(r.get(0)),o.children[l+a].render(r.get(0));var t=m(o.children[n].el),s=m(o.children[i].el);t.detach(),s.detach(),n<i?(0===n?r.prepend(t):m(o.children[n-1].el).after(t),m(o.children[i-1].el).after(s)):(0===i?r.prepend(s):m(o.children[i-1].el).after(s),m(o.children[n-1].el).after(t))}}))}},tabarray:{template:'<div id="<%= id %>"><div class="tabbable tabs-left"><ul class="nav nav-tabs"><%= tabs %></ul><div class="tab-content"><%= children %></div></div><a href="#" class="btn btn-default _jsonform-array-addmore"><i class="glyphicon glyphicon-plus-sign" title="Add new"></i></a> <a href="#" class="btn btn-default _jsonform-array-deleteitem"><i class="glyphicon glyphicon-minus-sign" title="Delete item"></i></a></div>',array:!0,childTemplate:function(e){return'<div data-idx="<%= node.childPos %>" class="tab-pane">'+e+"</div>"},onBeforeRender:function(e,t){var n="";t.children.forEach((e,t)=>{e=e.legend||e.title||"Item "+(t+1);n+='<li data-idx="'+t+'"'+(0===t?' class="active"':"")+'><a class="draggable tab" data-toggle="tab" rel="'+r(e)+'">'+p(e)+"</a></li>"}),e.tabs=n},onInsert:function(e,s){function o(e){var n="",t=!1;(e=void 0===e?(e=m("> .tabbable > .nav-tabs .active",d).data("idx"))?parseInt(e,10):(t=!0,0):e)>=s.children.length&&(e=s.children.length-1),s.children.forEach((e,t)=>{m('> .tabbable > .tab-content > [data-idx="'+t+'"] > fieldset > legend',d).html(e.legend);e=e.legend||e.title||"Item "+(t+1);n+='<li data-idx="'+t+'"><a class="draggable tab" data-toggle="tab" rel="'+r(e)+'">'+p(e)+"</a></li>"}),m("> .tabbable > .nav-tabs",d).html(n),t&&m('> .tabbable > .nav-tabs [data-idx="0"]',d).addClass("active"),m('> .tabbable > .nav-tabs [data-toggle="tab"]',d).eq(e).click()}var d=m(s.el).find("#"+f(s.id)),n=s.getArrayBoundaries();if(m("> a._jsonform-array-deleteitem",d).click(function(e){var t=m("> .tabbable > .nav-tabs .active",d).data("idx");if(e.preventDefault(),e.stopPropagation(),0<n.minItems&&(s.children.length<n.minItems+1&&d.find("> a._jsonform-array-deleteitem").addClass("disabled"),s.children.length<=n.minItems))return!1;s.deleteArrayItem(t),o(),(s.children.length<n.minItems+1||0===s.children.length)&&d.find("> a._jsonform-array-deleteitem").addClass("disabled"),0<=n.maxItems&&s.children.length<=n.maxItems&&d.find("> a._jsonform-array-addmore").removeClass("disabled")}),m("> a._jsonform-array-addmore",d).click(function(e){var t=s.children.length;if(0<=n.maxItems&&(s.children.length>n.maxItems-2&&m("> a._jsonform-array-addmore",d).addClass("disabled"),s.children.length>n.maxItems-1))return!1;e.preventDefault(),e.stopPropagation(),s.insertArrayItem(t,d.find("> .tabbable > .tab-content").get(0)),o(t),(n.minItems<=0||0<n.minItems&&t>n.minItems-1)&&d.find("> a._jsonform-array-deleteitem").removeClass("disabled")}),m(s.el).on("legendUpdated",function(e){o(),e.preventDefault(),e.stopPropagation()}),c(s.formElement.draggable)&&!s.formElement.draggable||m(s.el).sortable&&(m("> .tabbable > .nav-tabs",d).sortable({containment:s.el,tolerance:"pointer"}),m("> .tabbable > .nav-tabs",d).bind("sortstop",function(e,t){var n=m(t.item).data("idx"),t=m(t.item).index(),i=t;if(n!==i)for(var a=n<i?1:-1,l=0,r=m("> .tabbable > .tab-content",d).get(0),l=n;l!==i;l+=a)s.children[l].switchValuesWith(s.children[l+a]),s.children[l].render(r),s.children[l+a].render(r);o(t)})),0<=n.minItems&&s.children.length<=n.minItems){for(var t=0;t<n.minItems-1;t++)d.find("> a._jsonform-array-addmore").click();d.find("> a._jsonform-array-deleteitem").addClass("disabled"),o()}0<=n.maxItems&&s.children.length>=n.maxItems&&d.find("> a._jsonform-array-addmore").addClass("disabled"),0<=n.minItems&&s.children.length<=n.minItems&&d.find("> a._jsonform-array-deleteitem").addClass("disabled")}},help:{template:'<span class="help-block" style="padding-top:5px"><%= elt.helpvalue %></span>'},msg:{template:"<%= elt.msg %>"},fieldset:{template:'<fieldset class="pure-control-group jsonform-error-<%= keydash %> <% if (elt.expandable) { %>expandable<% } %> <%= elt.htmlClass?elt.htmlClass:"" %>" <% if (id) { %> id="<%= id %>"<% } %>><% if (node.title || node.legend) { %><legend role="treeitem" aria-expanded="false"><%= node.title || node.legend %></legend><% } %><% if (elt.expandable) { %><div class="pure-control-group"><% } %><%= children %><% if (elt.expandable) { %></div><% } %></fieldset>',onInsert:function(e,t){null!==t.el&&(m(".expandable > div, .expandable > fieldset",t.el).hide(),m(".expandable",t.el).removeClass("expanded"))}},advancedfieldset:{template:'<fieldset<% if (id) { %> id="<%= id %>"<% } %> class="expandable <%= elt.htmlClass?elt.htmlClass:"" %>"><legend role="treeitem" aria-expanded="false"><%= (node.title || node.legend) ? (node.title || node.legend) : "Advanced options" %></legend><div class="pure-control-group"><%= children %></div></fieldset>',onInsert:function(e,t){null!==t.el&&(m(".expandable > div, .expandable > fieldset",t.el).hide(),m(".expandable",t.el).removeClass("expanded"))}},authfieldset:{template:'<fieldset<% if (id) { %> id="<%= id %>"<% } %> class="expandable <%= elt.htmlClass?elt.htmlClass:"" %>"><legend role="treeitem" aria-expanded="false"><%= (node.title || node.legend) ? (node.title || node.legend) : "Authentication settings" %></legend><div class="pure-control-group"><%= children %></div></fieldset>',onInsert:function(e,t){null!==t.el&&(m(".expandable > div, .expandable > fieldset",t.el).hide(),m(".expandable",t.el).removeClass("expanded"))}},submit:{template:e=>`<input type="submit" ${e.id?`id="${e.id}"`:""} class="btn btn-primary ${e.elt.htmlClass||""}" value="${e.value||e.node.title}" ${e.node.disabled?"disabled":""} />`},button:{template:' <button type="button" <% if (id) { %> id="<%= id %>" <% } %> class="btn btn-default <%= elt.htmlClass?elt.htmlClass:"" %>"><%= node.title %></button> '},actions:{template:e=>`<div class="${e.elt.htmlClass||""}">${e.children}</div>`},hidden:{template:'<input type="hidden" id="<%= id %>" name="<%= node.name %>" value="<%= escape(value) %>" />'},tabs:{template:'<ul class="nav nav-tabs <%= elt.htmlClass?elt.htmlClass:"" %>"<% if (elt.id) { %> id="<%= elt.id %>"<% } %>><%=tab_list%></ul><div class="tab-content" <% if (elt.id) { %> data-tabset="<%= elt.id %>"<% } %>><%=children%></div>',getElement:function(e){return m(e).parent().get(0)},onBeforeRender:function(e,t){var i=p(t.id?t.id+"-":""),a="";return t.children.forEach((e,t)=>{var e=p(e.title||"Item "+(t+1)),n=e.replace(" ","_");a+='<li class="nav-item'+(0===t?" active":"")+'"><a href="#'+i+n+'" class="nav-link" data-tab="'+i+n+'" data-toggle="tab">'+e+"</a></li>"}),e.tab_list=a,e},onInsert:function(e,t){m("#"+t.id+">li.nav-item").on("click",function(e){e.preventDefault(),m(t.el).find("div[data-tabset='"+t.id+"']>div.tab-pane.active").each(function(){m(this).removeClass("active")});e=m(this).find("a").attr("data-tab");m("#"+e).addClass("active")})}},tab:{template:'<div class="tab-pane<% if (elt.htmlClass) { %> <%= elt.htmlClass %> <% } %><% if (node.childPos === 0) { %> active<% } %>"<% if (node.title) { %> id="<%= node.parentNode.id %>-<%= node.title.replace(" ","_") %>"<% } %>><%= children %></div>'},selectfieldset:{template:'<fieldset class="tab-container <%= elt.htmlClass?elt.htmlClass:"" %>"><% if (node.legend) { %><legend role="treeitem" aria-expanded="false"><%= node.legend %></legend><% } %><% if (node.formElement.key) { %><input type="hidden" id="<%= node.id %>" name="<%= node.name %>" value="<%= escape(value) %>" /><% } else { %><a id="<%= node.id %>"></a><% } %><div class="tabbable"><div class="pure-control-group<%= node.formElement.hideMenu ? " hide" : "" %>"><% if (!elt.notitle) { %><label for="<%= node.id %>"><%= node.title ? node.title : node.name %></label><% } %><div class="controls"><%= tabs %></div></div><div class="tab-content"><%= children %></div></div></fieldset>',getElement:function(e){return m(e).parent().get(0)},childTemplate:function(e){return'<div data-idx="<%= node.childPos %>" class="tab-pane<% if (node.active) { %> active<% } %>">'+e+"</div>"},onBeforeRender:function(e,i){var t=null,a=[],n=(i.schemaElement&&(a=i.schemaElement.enum||[]),(t=i.options?i.options.map((e,t)=>{var n=i.children[t];return n.childPos=t,e instanceof Object?((e=Object.assign({node:n},e)).title=e.title||n.legend||n.title||"Option "+(n.childPos+1),e.value=c(e.value)?e.value:c(a[t])?a[t]:t,e):{title:e,value:c(a[n.childPos])?a[n.childPos]:n.childPos,node:n}}):i.children.map((e,t)=>(e.childPos=t,{title:e.legend||e.title||"Option "+(e.childPos+1),value:a[e.childPos]||e.childPos,node:e}))).forEach(e=>{e.node.active=!1}),null),l=((n=(n=(n=e.value?t.find(e=>e.value===i.value):n)||t.find(e=>e.node.hasNonDefaultValue()))||t[0]).node.active=!0,e.value=n.value,i.formElement,'<select class="nav form-control"'+(i.disabled?" disabled":"")+">");return t.forEach((e,t)=>{l+='<option data-idx="'+t+'" value="'+e.value+'"'+(e.node.active?' selected="selected" class="active"':"")+">"+p(e.title)+"</option>"}),l+="</select>",e.tabs=l,e},onInsert:function(e,n){m(n.el).find("select.nav").first().on("change",function(e){var t=m(this).find("option:selected");m(n.el).find('input[type="hidden"]').first().val(t.attr("value"))})}},optionfieldset:{template:'<div<% if (node.id) { %> id="<%= node.id %>"<% } %>><%= children %></div>'},section:{template:'<div<% if (elt.htmlClass) { %> class="<%= elt.htmlClass %>"<% } %><% if (node.id) { %> id="<%= node.id %>"<% } %>><%= children %></div>'},questions:{template:'<div><input type="hidden" id="<%= node.id %>" name="<%= node.name %>" value="<%= escape(value) %>" /><%= children %></div>',getElement:function(e){return m(e).parent().get(0)},onInsert:function(e,t){t.children&&0!==t.children.length&&(t.children.forEach(e=>{m(e.el).hide()}),m(t.children[0].el).show())}}},x.util.getObjKey=function(e,t,n){for(var i=e,a=t.split("."),l=null,r=null,s=null,o=0;o<a.length;o++){if(null===i||"object"!=typeof i)return null;if(s=(l=a[o]).replace(d,""),d.lastIndex=0,r=d.exec(l))for(;;){if(s&&!Array.isArray(i[s]))return null;if(i=(s?i[s]:i)[parseInt(r[1])],!(r=d.exec(l)))break;s=null}else i=(n&&!i[s]&&Array.isArray(i)&&i[0]?i[0]:i)[s]}return n&&Array.isArray(i)&&i[0]?i[0]:i},x.util.setObjKey=function(e,t,n){for(var i=e,a=t.split("."),l=null,r=null,s=null,o=0;o<a.length-1;o++){if(s=(l=a[o]).replace(d,""),d.lastIndex=0,r=d.exec(l))for(;;)if(Array.isArray(i[s])||(i[s]=[]),i=i[s],s=parseInt(r[1],10),!(r=d.exec(l)))break;"object"==typeof i[s]&&null!==i[s]||(i[s]={}),i=i[s]}if(s=(l=a[a.length-1]).replace(d,""),d.lastIndex=0,r=d.exec(l))for(;;)if(Array.isArray(i[s])||(i[s]=[]),i=i[s],s=parseInt(r[1],10),!(r=d.exec(l)))break;i[s]=n},b.prototype.clone=function(e){var t=new b;return t.arrayPath=s(this.arrayPath),t.ownerTree=this.ownerTree,t.parentNode=e||this.parentNode,t.formElement=this.formElement,t.schemaElement=this.schemaElement,t.view=this.view,t.children=this.children.map(e=>e.clone(t)),this.childTemplate&&(t.childTemplate=this.childTemplate.clone(t)),t},b.prototype.hasNonDefaultValue=function(){return!(this.formElement&&"hidden"==this.formElement.type||(!this.value||this.defaultValue)&&!this.children.find(e=>e.hasNonDefaultValue()))},b.prototype.appendChild=function(e){return e.parentNode=this,e.childPos=this.children.length,this.children.push(e),e},b.prototype.removeChild=function(){var e=this.children[this.children.length-1];if(e)return m(e.el).remove(),this.children.pop()},b.prototype.moveValuesTo=function(e){var t=this.getFormValues(e.arrayPath);e.resetValues(),e.computeInitialValues(t,!0)},b.prototype.switchValuesWith=function(e){var t=this.getFormValues(e.arrayPath),n=e.getFormValues(this.arrayPath);e.resetValues(),e.computeInitialValues(t,!0),this.resetValues(),this.computeInitialValues(n,!0)},b.prototype.resetValues=function(){this.value=null,this.parentNode?(this.arrayPath=s(this.parentNode.arrayPath),this.parentNode.view&&this.parentNode.view.array&&this.arrayPath.push(this.childPos)):this.arrayPath=[],this.view&&m(":input",this.el).serializeArray().forEach(e=>{m('[name="'+f(e.name)+'"]',m(this.el)).val("")},this),this.children.forEach(e=>{e.resetValues()})},b.prototype.setChildTemplate=function(e){(this.childTemplate=e).parentNode=this},b.prototype.computeInitialValues=function(a,t){var l=this,e=null,n=1,i=0,r=this.ownerTree.formDesc.tpldata||{};if(this.parentNode?(this.arrayPath=s(this.parentNode.arrayPath),this.parentNode.view&&this.parentNode.view.array&&this.arrayPath.push(this.childPos)):this.arrayPath=[],r.idx=0<this.arrayPath.length?this.arrayPath[this.arrayPath.length-1]+1:this.childPos+1,r.value="",r.getValue=function(e){if(!a)return"";for(var t=a,n=e.split("[]."),i=0;i<n.length-1;i++)t=t[n[i]][l.arrayPath[i]];return t[n[i]]},this.formElement&&(this.formElement.id?this.id=y(this.formElement.id,this.arrayPath):(this.view&&this.view.array||this.parentNode&&this.parentNode.view&&this.parentNode.view.array||"button"===this.formElement.type||"selectfieldset"===this.formElement.type||"question"===this.formElement.type||"buttonquestion"===this.formElement.type)&&(this.id=f(this.ownerTree.formDesc.prefix)+"-elt-counter-"+Date.now()),this.formElement.key&&(this.key=y(this.formElement.key,this.arrayPath),this.keydash=o(this.key.replace(/\./g,"---"))),this.name=y(this.formElement.name,this.arrayPath),["title","legend","description","append","prepend","inlinetitle","helpvalue","value","disabled","placeholder","readOnly"].forEach(e=>{"string"==typeof this.formElement[e]?(-1!==this.formElement[e].indexOf("{{values.")?this[e]=this.formElement[e].replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}'):this[e]=y(this.formElement[e],this.arrayPath),this[e]&&(this[e]=tmpl(this[e],h)(r))):this[e]=this.formElement[e]},this),this.formElement.options)&&(this.options=this.formElement.options.map(e=>{var t=null;return"object"==typeof e&&e.title?(t=-1!==e.title.indexOf("{{values.")?e.title.replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}'):y(e.title,l.arrayPath),Object.assign({},e,{value:c(e.value)?e.value:"",title:tmpl(t,h)(r)})):e})),this.view&&this.schemaElement)a?c(x.util.getObjKey(a,this.key))?this.value=x.util.getObjKey(a,this.key):c(this.schemaElement.default)&&(this.value=this.schemaElement.default,"string"==typeof this.value)&&(this.value=tmpl(this.value,h)(r)):t||!c(this.value)&&c(this.schemaElement.default)&&(this.value=this.schemaElement.default,"string"==typeof this.value&&(-1!==this.value.indexOf("{{values.")?this.value=this.value.replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}'):this.value=y(this.value,this.arrayPath),this.value)&&(this.value=tmpl(this.value,h)(r)),this.defaultValue=!0);else if(this.view&&this.view.array)for(n=0,a?n=this.getPreviousNumberOfItems(a,this.arrayPath):0===n&&(n=1),i=0;i<n;i++)this.appendChild(this.childTemplate.clone());if(this.children.forEach(e=>{e.computeInitialValues(a,t)}),this.formElement&&this.formElement.valueInLegend)for(e=this;e;){if(e.parentNode&&e.parentNode.view&&e.parentNode.view.array&&(e.legendChild=this,e.formElement)&&e.formElement.legend){e.legend=y(e.formElement.legend,e.arrayPath),r.idx=0<e.arrayPath.length?e.arrayPath[e.arrayPath.length-1]+1:e.childPos+1,r.value=c(this.value)?this.value:"",e.legend=tmpl(e.legend,h)(r);break}e=e.parentNode}},b.prototype.getPreviousNumberOfItems=function(t,n){var e,i=null;return t?this.schemaElement?(e=((e,t)=>{var n=0,i=0;if(!e)return null;if(0<t)for(;n<t;){if(-1===(i=e.indexOf("[]",i)))return e;i+=2,n+=1}return-1===(i=e.indexOf("[]",i))?e:e.substring(0,i)})(this.formElement.key,n.length),e=y(e,n),(e=x.util.getObjKey(t,e))?(i=this.children.map(e=>e.getPreviousNumberOfItems(t,n)),Math.max(Math.max(...i)||0,e.length)):0):this.view.array?this.childTemplate.getPreviousNumberOfItems(t,n):(i=this.children.map(e=>e.getPreviousNumberOfItems(t,n)),Math.max(...i)||0):0},b.prototype.getFormValues=function(t){var e={};if(!this.el)throw new Error("formNode.getFormValues can only be called on nodes that are associated with a DOM element in the tree");var n=(n=m(":input",this.el).serializeArray()).concat(m(":input[type=checkbox]:not(:disabled):not(:checked)",this.el).map(function(){return{name:this.name,value:this.checked}}).get());t&&n.forEach(e=>{e.name=y(e.name,t)});for(var i=this.ownerTree.formDesc.schema,a=0;a<n.length;a++){var l,r=n[a].name,s=v(i.properties,r),o=null;if(s)if(s._jsonform_checkboxes_as_array&&(l=r.match(/\[([0-9]*)\]$/)))r=r.replace(/\[([0-9]*)\]$/,""),o=x.util.getObjKey(e,r)||[],"1"===n[a].value&&o.push(s.enum[parseInt(l[1],10)]),x.util.setObjKey(e,r,o);else{if("boolean"===s.type&&("0"===n[a].value?n[a].value=!1:n[a].value=!!n[a].value),"number"!==s.type&&"integer"!==s.type||"string"==typeof n[a].value&&(n[a].value.length?isNaN(Number(n[a].value))||(n[a].value=Number(n[a].value)):n[a].value=null),"string"!==s.type||""!==n[a].value||s._jsonform_allowEmpty||(n[a].value=null),"object"===s.type&&"string"==typeof n[a].value&&"{"===n[a].value.substring(0,1))try{n[a].value=JSON.parse(n[a].value)}catch(e){n[a].value={}}"object"!==s.type||"null"!==n[a].value&&""!==n[a].value||(n[a].value=null),n[a].name&&null!==n[a].value&&x.util.setObjKey(e,n[a].name,n[a].value)}}return e},b.prototype.render=function(e){var t=this.generate();this.setContent(t,e),this.enhance()},b.prototype.setContent=function(e,t){var n,e=m(e),t=t||(this.parentNode?this.parentNode.el:this.ownerTree.domRoot);this.el?m(this.el).replaceWith(e):(n=m(t).children().get(this.childPos))?m(n).before(e):m(t).append(e),this.el=e,this.updateElement(this.el)},b.prototype.updateElement=function(e){for(var t in this.id&&(this.el=m("#"+f(this.id),e).get(0),this.view&&this.view.getElement&&(this.el=this.view.getElement(this.el)),this.el=m(this.el).parent().parent(),this.prepend&&(this.el=this.el.parent()),this.el=this.el.get(0),this.parentNode)&&this.parentNode.view&&this.parentNode.view.childTemplate&&(this.el=m(this.el).parent().get(0)),this.children)0!=this.children.hasOwnProperty(t)&&this.children[t].updateElement(this.el||e)},b.prototype.generate=function(){var e={id:this.id,keydash:this.keydash,elt:this.formElement,schema:this.schemaElement,node:this,value:c(this.value)?this.value:"",escape:p},t=null,n=(this.ownerTree.formDesc.onBeforeRender&&this.ownerTree.formDesc.onBeforeRender(e,this),this.view.onBeforeRender&&this.view.onBeforeRender(e,this),t=this.template||(this.formElement&&this.formElement.template?this.formElement:this.view).template,this.parentNode&&this.parentNode.view&&this.parentNode.view.childTemplate&&(t=this.parentNode.view.childTemplate(t,!c(this.parentNode.formElement.draggable)||this.parentNode.formElement.draggable)),"");return this.children.forEach(e=>{n+=e.generate()}),e.children=n,e.fieldHtmlClass="",this.ownerTree&&this.ownerTree.formDesc&&this.ownerTree.formDesc.params&&this.ownerTree.formDesc.params.fieldHtmlClass&&(e.fieldHtmlClass=this.ownerTree.formDesc.params.fieldHtmlClass),this.formElement&&void 0!==this.formElement.fieldHtmlClass&&(e.fieldHtmlClass=this.formElement.fieldHtmlClass),t=t(e),x.fieldTemplate(t,e.elt,e.node)},b.prototype.enhance=function(){var e,n=this,t=null,i=s(this.ownerTree.formDesc.tpldata)||{};this.formElement&&(this.view.onInsert&&this.view.onInsert({target:m(this.el)},this),e=this.handlers||this.formElement.handlers,(t=this.onInsert||this.formElement.onInsert)&&t({target:m(this.el)},this),e&&Object.keys(e).forEach((e,t)=>{"insert"===t&&e({target:m(this.el)},this)},this),this.el&&(this.onChange&&m(this.el).bind("change",function(e){n.onChange(e,n)}),this.view.onChange&&m(this.el).bind("change",function(e){n.view.onChange(e,n)}),this.formElement.onChange&&m(this.el).bind("change",function(e){n.formElement.onChange(e,n)}),this.onInput&&m(this.el).bind("input",function(e){n.onInput(e,n)}),this.view.onInput&&m(this.el).bind("input",function(e){n.view.onInput(e,n)}),this.formElement.onInput&&m(this.el).bind("input",function(e){n.formElement.onInput(e,n)}),this.onClick&&m(this.el).bind("click",function(e){n.onClick(e,n)}),this.view.onClick&&m(this.el).bind("click",function(e){n.view.onClick(e,n)}),this.formElement.onClick&&m(this.el).bind("click",function(e){n.formElement.onClick(e,n)}),this.onKeyUp&&m(this.el).bind("keyup",function(e){n.onKeyUp(e,n)}),this.view.onKeyUp&&m(this.el).bind("keyup",function(e){n.view.onKeyUp(e,n)}),this.formElement.onKeyUp&&m(this.el).bind("keyup",function(e){n.formElement.onKeyUp(e,n)}),e)&&Object.keys(e).forEach((t,e)=>{"insert"!==e&&m(this.el).bind(e,function(e){t(e,n)})},this),this.legendChild)&&this.legendChild.formElement&&(t=function(e){n.formElement&&n.formElement.legend&&n.parentNode&&(n.legend=y(n.formElement.legend,n.arrayPath),i.idx=0<n.arrayPath.length?n.arrayPath[n.arrayPath.length-1]+1:n.childPos+1,i.value=m(e.target).val(),n.legend=tmpl(n.legend,h)(i),m(n.parentNode.el).trigger("legendUpdated"))},m(this.legendChild.el).bind("change",t),m(this.legendChild.el).bind("keyup",t)),this.children.forEach(e=>{e.enhance()})},b.prototype.insertArrayItem=function(e,t){var n=0,i=(void 0===e&&(e=this.children.length),this.childTemplate.clone());for(this.appendChild(i),i.resetValues(),n=this.children.length-2;e<=n;n--)this.children[n].moveValuesTo(this.children[n+1]);for(this.children[e].resetValues(),this.children[e].computeInitialValues(),n=e;n<this.children.length;n++)this.children[n].render(t)},b.prototype.deleteArrayItem=function(e){for(var t=0,t=e=void 0===e?this.children.length-1:e;t<this.children.length-1;t++)this.children[t+1].moveValuesTo(this.children[t]),this.children[t].render();this.removeChild()},b.prototype.getArrayBoundaries=function(){var a;return this.view&&this.view.array?(a=function(e,t){var n=null,i={minItems:-1,maxItems:-1};if(t=t||e,!e.view||!e.view.array||e===t){if(e.key)return n=e.key.replace(/\[[0-9]+\]/g,"[]"),e!==t&&(n=n.replace(/\[\][^\[\]]*$/,"")),(n=v(e.ownerTree.formDesc.schema.properties,n))?{minItems:n.minItems||n.minLength||-1,maxItems:n.maxItems||n.maxLength||-1}:i;e.children.forEach(e=>{e=a(e,t);-1!==e.minItems&&(i.minItems=-1!==i.minItems?Math.max(i.minItems,e.minItems):e.minItems),-1!==e.maxItems&&(i.maxItems=-1!==i.maxItems?Math.min(i.maxItems,e.maxItems):e.maxItems)})}return i})(this):{minItems:-1,maxItems:-1}},E.prototype.initialize=function(e){e=e||{},this.formDesc=s(e),this.formDesc.prefix=this.formDesc.prefix||"jsonform-"+Date.now(),this.formDesc.schema&&!this.formDesc.schema.properties&&(this.formDesc.schema={properties:this.formDesc.schema}),this.formDesc.form=this.formDesc.form||["*",{type:"actions",items:[{type:"submit",value:"Submit"}]}],this.formDesc.form=Array.isArray(this.formDesc.form)?this.formDesc.form:[this.formDesc.form],this.formDesc.params=this.formDesc.params||{},this.root=new b,(this.root.ownerTree=this).root.view=x.elementTypes.root,this.buildTree(),this.computeInitialValues()},E.prototype.buildTree=function(){this.formDesc.form.forEach(e=>{"*"===e?Object.keys(this.formDesc.schema.properties).forEach(e=>{this.root.appendChild(this.buildFromLayout({key:e}))},this):this.root.appendChild(this.buildFromLayout(e="string"==typeof e?{key:e}:e))},this)},E.prototype.buildFromLayout=function(n,e){var t,i=null,a=new b,l=null;if((n=s(n)).items&&(n.items=s(n.items)),n.key){if(!(i=v(this.formDesc.schema.properties,n.key)))throw new Error('The JSONForm object references the schema key "'+n.key+'" but that key does not exist in the JSON schema');if(this.formDesc.onElementSchema&&this.formDesc.onElementSchema(n,i),n.name=n.name||n.key,n.title=n.title||i.title,n.description=n.description||i.description,n.readOnly=n.readOnly||i.readOnly||n.readonly||i.readonly,n.id||(n.id=f(this.formDesc.prefix)+"-elt-"+o(n.key)),n.allowEmpty&&(i._jsonform_allowEmpty=!0),!n.type){if(Array.isArray(i.type)){if(i.type.includes("null")&&(i.type=i.type.filter(e=>"null"!==e),i.required=!1),1<i.type.length)throw new Error("Cannot process schema element with multiple types.");i.type=Array.isArray(i.type)?i.type[0]:i.type}"string"===i.type&&"color"===i.format?n.type="color":"number"!==i.type&&"integer"!==i.type||i.enum?"string"!==i.type&&"any"!==i.type||i.enum?"boolean"===i.type?n.type="checkbox":"object"===i.type?i.properties?n.type="fieldset":n.type="textarea":void 0!==i.enum?n.type="select":n.type=i.type:n.type="text":(n.type="number")===i.type&&(i.step="any")}!n.options&&i.enum&&(n.titleMap?n.options=i.enum.map(e=>({value:e,title:u(n.titleMap,e)?n.titleMap[e]:e})):n.options=i.enum),"checkboxes"===n.type&&i.items&&((t=i.items.enum)&&(i.items._jsonform_checkboxes_as_array=!0),!t)&&i.items[0]&&(t=i.items[0].enum)&&(i.items[0]._jsonform_checkboxes_as_array=!0),"object"===i.type&&i.properties.forEach((e,t)=>{a.appendChild(this.buildFromLayout({key:n.key+"."+t}))},this)}if(n.type||(n.type="none"),t=x.elementTypes[n.type])return n.iddot=f(n.id||""),a.formElement=n,a.schemaElement=i,a.view=t,a.ownerTree=this,n.handlers||(n.handlers={}),a.view.array?(l=n.items?n.items[0]||n.items:n.key+"[]",a.setChildTemplate(this.buildFromLayout(l="string"==typeof l?{key:l}:l))):n.items&&n.items.forEach(e=>{a.appendChild(this.buildFromLayout(e="string"==typeof e?{key:e}:e))},this),a;throw new Error('The JSONForm contains an element whose type is unknown: "'+n.type+'"')},E.prototype.computeInitialValues=function(){this.root.computeInitialValues(this.formDesc.value)},E.prototype.render=function(e){e&&(this.domRoot=e,this.root.render(),this.hasRequiredField())&&m(e).addClass("jsonform-hasrequired")},E.prototype.forEachElement=function(n){function i(e){for(var t=0;t<e.children.length;t++)n(e.children[t]),i(e.children[t])}i(this.root)},E.prototype.validate=function(e){var t,n=x.getFormValue(this.domRoot),i=!1,a=this.formDesc;return(i=!1!==a.validate&&(t=!1,"object"!=typeof a.validate?window.JSONFormValidator&&(t=window.JSONFormValidator.createEnvironment("json-schema-draft-03")):t=a.validate,t)&&(t=t.validate(n,this.formDesc.schema),m(this.domRoot).jsonFormErrors(!1,a),t.errors.length)?(i=i||[]).concat(t.errors):i)&&!e&&(a.displayErrors?a.displayErrors(i,this.domRoot):m(this.domRoot).jsonFormErrors(i,a)),{errors:i}},E.prototype.submit=function(t){function e(){return t&&(t.preventDefault(),t.stopPropagation()),!1}var n,i=x.getFormValue(this.domRoot),a=this.formDesc,l=!1;return this.forEachElement(function(e){l||e.view.onSubmit&&(l=!e.view.onSubmit(t,e))}),(l||(n=this.validate(),a.onSubmit&&!a.onSubmit(n.errors,i))||n.errors||!(!a.onSubmitValid||a.onSubmitValid(i)))&&e()},E.prototype.hasRequiredField=function(){function n(e){var t;return e?e.required&&"boolean"!==e.type?e:e.properties?(t=Object.keys(e.properties).find(n))||(e.items&&(t=Array.isArray(e.items)?Object.keys(e.items).find(n):n(e.items))?t:void 0):null:null}return n(this.formDesc.schema)},x.getFormValue=function(e){e=m(e).data("jsonform-tree");return e?e.root.getFormValues():null},m.fn.jsonFormErrors=function(e,t){if(m(".error",this).removeClass("error"),m(".warning",this).removeClass("warning"),m(".jsonform-errortext",this).hide(),e){for(var n=[],i=0;i<e.length;i++){var a=e[i].uri.replace(/.*#\//,"").replace(/\//g,".").replace(/\.([0-9]+)(?=\.|$)/g,"[$1]"),a=".jsonform-error-"+f(a.replace(/\./g,"---")),l=(n.push(a),e[i].type||"error");m(a,this).addClass(l),m(a+" .jsonform-errortext",this).html(e[i].message).show()}var n=n.join(","),r=m(n).get(0);r&&r.scrollIntoView&&r.scrollIntoView(!0,{behavior:"smooth"})}},m.fn.jsonForm=function(e){var n,t=this,i=(n={},[e,{submitEvent:"submit"}].forEach(t=>{Object.keys(t).forEach(e=>{void 0===n[e]&&(n[e]=t[e])})}),e=n,new E);return i.initialize(e),i.render(t.get(0)),e.transloadit&&t.append('<input type="hidden" name="params" value=\''+p(JSON.stringify(e.transloadit.params))+"'>"),t.data("jsonform-tree",i),e.submitEvent&&(t.unbind(e.submitEvent+".jsonform"),t.bind(e.submitEvent+".jsonform",function(e){i.submit(e)})),l(t),m(".expandable > div, .expandable > fieldset",t).hide(),t.on("click",".expandable > legend",function(){var e=m(this).parent();e.toggleClass("expanded"),e.find("legend").attr("aria-expanded",e.hasClass("expanded")),m("> div",e).slideToggle(100)}),i},m.fn.jsonFormValue=function(){return x.getFormValue(this)},window.JSONForm=window.JSONForm||{util:{}},window.JSONForm.getFormValue=x.getFormValue,window.JSONForm.fieldTemplate=x.fieldTemplate,window.JSONForm.fieldTypes=x.elementTypes,window.JSONForm.getInitialValue=g,window.JSONForm.util.getObjKey=x.util.getObjKey,window.JSONForm.util.setObjKey=x.util.setObjKey})("undefined"!=typeof Zepto?Zepto:{fn:{}});